ржЖржкржирж┐ ржЪрж╛ржЗржЫрзЗржи `lsof` ржХржорж╛ржирзНржбрзЗрж░ рж╕ржм ржЕржкрж╢ржи ржПржмржВ ржмрзНржпржмрж╣рж╛рж░ ржЬрж╛ржирж╛рж░ ржЬржирзНржпред ржЖржорж┐ ржПржЯрж╛ржХрзЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐рждржнрж╛ржмрзЗ ржжрзЗржЦрж╛ржЪрзНржЫрж┐ред

`lsof` (List Open Files) рж╣рж▓рзЛ ржПржХржЯрж┐ рж╢ржХрзНрждрж┐рж╢рж╛рж▓рзА ржЯрзБрж▓ ржпрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржЦрзЛрж▓рж╛ ржлрж╛ржЗрж▓ ржПржмржВ ржХрзЛржи ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржХрзЛржи ржлрж╛ржЗрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗ рждрж╛ ржжрзЗржЦрж╛ржпрж╝ред Linux-ржП ржкрзНрж░рж╛ржпрж╝ рж╕ржмржХрж┐ржЫрзБ ржлрж╛ржЗрж▓ рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛ рж╣ржпрж╝, рждрж╛ржЗ ржПржЯрж┐ ржЦрзБржмржЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред

---

### **lsof ржПрж░ рж╕рж╛ржзрж╛рж░ржг рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕**

```bash
lsof [options] [files]
```

---

### **ржкрзНрж░ржзрж╛ржи ржЕржкрж╢ржирж╕ржорзВрж╣**

| Option           | Description                                             | Example                                |
| ---------------- | ------------------------------------------------------- | -------------------------------------- |
| `-i`             | ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕ржВржХрзНрж░рж╛ржирзНржд ржлрж╛ржЗрж▓ ржжрзЗржЦрж╛ржпрж╝ (TCP/UDP)ред             | `lsof -i`                              |
| `-i :80`         | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрзЛрж░рзНржЯрзЗрж░ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржжрзЗржЦрж╛ржпрж╝                     | `lsof -i :80`                          |
| `-i tcp`         | TCP рж╕ржВржпрзЛржЧ ржжрзЗржЦрж╛ржпрж╝                                        | `lsof -i tcp`                          |
| `-i udp`         | UDP рж╕ржВржпрзЛржЧ ржжрзЗржЦрж╛ржпрж╝                                        | `lsof -i udp`                          |
| `-u <username>`  | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржЙржЬрж╛рж░рзЗрж░ ржлрж╛ржЗрж▓ ржжрзЗржЦрж╛ржпрж╝                           | `lsof -u masud`                        |
| `-p <PID>`       | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ PID ржПрж░ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржжрзЗржЦрж╛ржпрж╝                      | `lsof -p 1234`                         |
| `-c <command>`   | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржХржорж╛ржирзНржб/ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржжрзЗржЦрж╛ржпрж╝                      | `lsof -c sshd`                         |
| `+D <directory>` | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рж░ рж╕ржм ржлрж╛ржЗрж▓ ржжрзЗржЦрж╛ржпрж╝                     | `lsof +D /var/log`                     |
| `+d <directory>` | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рж░ рж╕рж░рж╛рж╕рж░рж┐ ржлрж╛ржЗрж▓ ржжрзЗржЦрж╛ржпрж╝ (recursive ржиржпрж╝) | `lsof +d /tmp`                         |
| `-t`             | рж╢рзБржзрзБ PID ржжрзЗржЦрж╛ржпрж╝                                         | `lsof -t -i :22`                       |
| `-n`             | рж╣рзЛрж╕рзНржЯржирзЗржо ржирж╛ ржжрзЗржЦрж┐ржпрж╝рзЗ IP ржжрзЗржЦрж╛ржпрж╝                           | `lsof -i -n`                           |
| `-P`             | рж╕рж╛рж░рзНржнрж┐рж╕ ржирж╛ржо ржирж╛ ржжрзЗржЦрж┐ржпрж╝рзЗ ржкрзЛрж░рзНржЯ ржиржорзНржмрж░ ржжрзЗржЦрж╛ржпрж╝               | `lsof -i -P`                           |
| `-r [seconds]`   | ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржоржпрж╝ ржЕржирзНрждрж░ ржкрзБржирж░рж╛ржпрж╝ рж▓рж┐рж╕рзНржЯ ржХрж░рзЗ                  | `lsof -r 5` (ржкрзНрж░рждрж┐ 5 рж╕рзЗржХрзЗржирзНржбрзЗ рж░рж┐ржлрзНрж░рзЗрж╢) |
| `-h`             | рж╕рж╛рж╣рж╛ржпрзНржп ржжрзЗржЦрж╛ржпрж╝                                          | `lsof -h`                              |
| `-V`             | ржнрж╛рж░рзНрж╕ржи ржжрзЗржЦрж╛ржпрж╝                                           | `lsof -V`                              |
| `-F`             | output machine-readable format ржП ржжрзЗржпрж╝                   | `lsof -i -F`                           |
| `-s`             | file size ржжрзЗржЦрж╛ржпрж╝                                        | `lsof -s`                              |
| `-a`             | multiple conditions logical AND ржжрж┐ржпрж╝рзЗ filter ржХрж░рзЗ        | `lsof -i -u masud -a`                  |

---

### **ржХрж┐ржЫрзБ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЙржжрж╛рж╣рж░ржг**

1. **рж╕ржм ржЦрзЛрж▓рж╛ ржлрж╛ржЗрж▓ ржжрзЗржЦрж╛ржирзЛ**

```bash
lsof
```

2. **ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржЙржЬрж╛рж░рзЗрж░ ржЦрзЛрж▓рж╛ ржлрж╛ржЗрж▓ ржжрзЗржЦрж╛ржирзЛ**

```bash
lsof -u masud
```

3. **ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрзЛрж░рзНржЯрзЗрж░ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржжрзЗржЦрж╛ржирзЛ (ржпрзЗржоржи 80)**

```bash
lsof -i :80
```

4. **ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕ржВржпрзЛржЧрзЗрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржжрзЗржЦрж╛ржирзЛ**

```bash
lsof -i -n -P
```

5. **ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐рж░ ржлрж╛ржЗрж▓ржЧрзБрж▓рзЛ ржжрзЗржЦрж╛ржирзЛ**

```bash
lsof +D /var/log
```

6. **ржирж┐рж░рзНржжрж┐рж╖рзНржЯ PID ржПрж░ ржЦрзЛрж▓рж╛ ржлрж╛ржЗрж▓**

```bash
lsof -p 1234
```

---

ЁЯТб **Tip:** `lsof` ржПрж░ ржЖржЙржЯржкрзБржЯрзЗрж░ ржкрзНрж░ржзрж╛ржи ржХрж▓рж╛ржоржЧрзБрж▓рзЛ рж╣рж▓рзЛ:

```
COMMAND  PID  USER  FD  TYPE  DEVICE  SIZE/OFF  NODE  NAME
```

* `FD` = File Descriptor
* `TYPE` = ржлрж╛ржЗрж▓рзЗрж░ ржзрж░ржи (REG, DIR, CHR, FIFO, SOCK)
* `NAME` = ржлрж╛ржЗрж▓рзЗрж░ path ржмрж╛ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ info

---

ржпржжрж┐ ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ рждрзЛржорж╛рж░ ржЬржирзНржп **ржПржХржЯрж╛ ржкрзВрж░рзНржг рждрж╛рж▓рж┐ржХрж╛ ржмрж╛ржирж╛рждрзЗ ржкрж╛рж░рж┐ lsof ржПрж░ рж╕ржм ржЕржкрж╢ржи ржПржмржВ flag-ржПрж░** рж╕рж╛ржерзЗ short explanation рж╕рж╣, ржпрж╛рждрзЗ cheat sheet рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝ред

рждрзБржорж┐ ржХрж┐ ржЖржорж┐ рж╕рзЗржЯрж╛ ржмрж╛ржирж╛ржЗ?
